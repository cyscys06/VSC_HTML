<!-- 이벤트 흐름: 이벤트 발생시 window 객체에 먼저 도달하고, DOM 트리를 따라 이벤
트 타겟에 도착하고, 다시 반대 방향으로 흘러 window 객체에 도달한 다음
사라지는 전체 과정-->
<!-- 전체 과정
 1. 캡쳐 단계: 이벤트가 window 객체에서 중간의 모든 DOM 객체를 거쳐 타겟 객체에 전달되는 과정
-> 이 과정에서 이벤트가 자신이 거쳐가는 모든 DOM 객체(window포함)의 이벤트 캡쳐 리스너를 실행시킴
 2. 버블 단계: 이벤트가 타겟에서 중간의 모든 DOM 객체를 거쳐 다시 window 객체에 전달되는 과정(1단계와 반대)
-> 이벤트가 거쳐가는 모든 DOM 객체(window포함)의 이벤트 버블 리스너 실행-->

<!-- addEventListener에서 캡처, 버블에 따라 서로 다른 메서드를 실행시킬 수 있음
 -> 세번째 매개변수가 true면 캡처 리스너 메서드를,
    세번째 매개변수가 false면 버블 리스너 메서드를 실행시킬 수 있음 -->
<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>이벤트 흐름</title>
   </head>
   <body>
      <p style="color:blue">이것은
         <span style="color:red" id="span">문장입니다.</span>
      </p>
      <form>
         <input type="text" name="s">
         <input type="button" value="테스트" id="button">
         <hr>
      </form>
      <div id="div" style="color:green"></div>
      <script>
         let div = document.getElementById("div"); // 이벤트 메시지 출력 공간
         let button = document.getElementById("button");
         
         // body 객체에 캡쳐 리스너 등록
         document.body.addEventListener("click", capture, true); // 켭쳐 단계(1)
         // 타겟 객체에 버블 리스너 등록
         button.addEventListener("click", bubble, false); // 버블 단계(2)
         // body 객체에 버블 리스너 등록
         document.body.addEventListener("click", bubble, false); // 버블 단계(3)
         
         function capture(e) { // e는 이벤트 객체
            let obj = e.currentTarget; // 현재 이벤트를 받은 DOM 객체
            let tagName = obj.tagName; // 태그 이름
            div.innerHTML += "<br>capture 단계 : " + tagName + " 태그 " + e.type + "이벤트";
         }
         
         function bubble(e) { // e는 이벤트 객체
            let obj = e.currentTarget; // 현재 이벤트를 받은 DOM 객체
            let tagName = obj.tagName; // 태그 이름
            div.innerHTML += "<br>bubble 단계 : " + tagName + " 태그 " + e.type + "이벤트";
         }
      </script>
   </body>
</html>

<!-- 실행 결과:
 capture 단계 : BODY 태그 click이벤트
bubble 단계 : INPUT 태그 click이벤트
bubble 단계 : BODY 태그 click이벤트 
-> 발생한 이벤트(그냥 클릭)가 캡쳐 단계(내려가는 단계)일때, 첫번째줄이 출력됨
-> 발생한 이벤트(테스트버튼을 클릭)가 버블 단계(다시 올라가는 단계)일때, 두번째줄이 출력됨
-> 발생한 이벤트(그냥 클릭)기 버블 단계(다시 올리가는 단계)일때, 세번째줄이 출력됨
=> 그냥 클릭한 경우 두번째줄은 출력 안되지만, 
테스트버튼을 클릭한 경우 두가지 이벤트(그냥 클릭 + 테스트버튼 클릭)가 동시에 발생해서 
미리 코드를 작성해놓은 두번째 줄도 첫번째, 세번째 출력과 같이 나옴 -->